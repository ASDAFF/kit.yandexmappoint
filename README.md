# kit.yandexmappoint

1. Установка продукта

Установите модуль, установка происходит по стандартному алгоритму установки любого решения. 

В процессе установки модуля будет создан инфоблок 

тип инфоблока: Настройки (wm.yandexpoint)

инфоблок: Адреса для яндекс карты

2. Настройка модуля

После установки модуль необходимо настроить.

для настройки модуля перейдите в административной панели сайта Настройки -> Настройки модулей -> Вывод меток из инфоблока на яндекс карту

2.1 API key от Яндекс Карт - Для использования модуля Вам понадобится API key от Яндекс Карт, получить API ключ вы можете на портале 
https://developer.tech.yandex.ru/services/
там будет кнопка Получить API

Во всплывающем окне выберите сервис «JavaScript API и HTTP Геокодер».
инструкция от Yandex по получению ключа https://tech.yandex.ru/maps/jsapi/doc/2.1/quick-start/index-docpage/
Внимание: Вы должны быть авторизованны на яндекс
как только получите ключ переходите в настройки модуля
заполните поле Ключ яндекс АПИ

2.2 ID инфоблока с адресами меток: - должно быть проставлено автоматически (заполняется при установке), не удаляйте это значение модуль его использует чтобы понимать из какого инфоблока забирать метки

2.3 Координаты центра карты: данное поле отвечает за центр карты который будет отображен при загрузке карты
координаты вы можете получить в сервисе 
https://yandex.ru/map-constructor/location-tool/ - определение координат и центра карты

найдите нужный вам центр и вверху справа будут отображены координаты, скопируйте и введите их в поле Координаты центра карты

2.4 Стартовое приближение карты: данное поле отвечает за стартовое приближение на карте, можете выставлять от 6 до 15, мы используем среднее 12, если надо ближе уменьшайте значение, поэкспериментируйте с данным значением найдете удобный вам масштаб

2.5 Ширина карты (px) и Высота карты (px) - эти значения отвечают за размеры выводимой карты
вы можете вводить значения в px например 1000px
либо можете ввести значение в % например 100% 

2.6 Отключение использования скролла для изменения масштаба карты: один из интересных параметров который отвечает за использование скролла мыша для изменения масштаба карты, когда курсор находится на ней, нас немного раздражает изменение масштаба по скроллу, поэтому мы сделали возможность его отключения, надеемся это кому то кроме нас тоже будет полезно, но также вы можете включить использование скролла на карте , для этого введите значение true в поле.


3. Использование модуля

В созданном инфоблоке после установки не будет заполнено каких либо элементов. Элементы инфоблока являются метками для отображения на яндекс карте.

заполните элементы для отображения меток на карте

назначение полей при создании элемента:

3.1 Название элемента отвечает за название точки и будет отображаться на метке внутри баллуна
пример: Музей Н.А.Добролюбова

3.2 поле Адрес точки - текстовое описание адреса, будет отображаться на метке внутри баллуна
пример: Наб. Лыковая дамба, д.2, 2а, Нижний Новгород, Нижегородская обл., 603005

3.3 поле Время работы - текстовое описание времени работы, будет отображаться на метке внутри баллуна
пример: ПН-ПЯ: 09:00–16:00 СБ-ВС: 09:00–20:00

3.4 поле телефон: телефон,  будет отображаться на метке внутри баллуна, множественное
пример: +7 (831) 433-53-89

3.5 поле Координаты метки для яндекса: тут Вы заполняете координаты метки, их можно получить по ссылке
http://webmap-blog.ru/tools/getlonglat-ymap2.html выберите точку и вверху справа будут отображены координаты, скопируйте и введите их в поле Координаты метки для яндекса, это один из вариантов.
пример: 56.3227,43.9983

3.6 поле Размеры иконки в px: в возможности модуля входит функционал добавления своей иконки для отображения ее на метке карты
в поле Картинка для анонса, добавьте изображение со своей картинкой для метки а в поле Размеры иконки в px введите ее размеры
пример: 20, 20
иконка будет квадратная 20 на 20 px


3.7 поле HTML код внутри метки: в это поле вы можете ввести произвольный HTML код для отображения внутри баллуна, в случае если поле заполнено то поля:

Адрес точки
Время работы
телефон

не будут отображены внутри баллуна

3.8 поле Шаблон метки (preset): данное поле отвечает за отображение одной из стандартных иконок на метке, к примеру вы не используете свои метки через изображение анонса, но хотели бы выбрать одну из стандартных меток предоставляемых яндексом

примеры вы можете посмотреть на странице https://tech.yandex.ru/maps/jsbox/2.1/placemark

найдите тег preset: 'islands#icon',

значение islands#icon нужно вводит в поле, для отображения выбранного типа метки

3.9 поле Цвет иконки (iconColor): в случае если вы задали один из стандартных пресетов через поле Шаблон метки (preset) дополнительно иконке можно задать цвет
пример #0095b6

3.10 вызов компонента с картой:

на нужной вам странице 

вы должны вызвать компонент стандартными средствами через режим правки страницы

либо сделать это напрямую через редактирование страницы

$APPLICATION->IncludeComponent(
   "kit:yandexmap.pointview",
   "",
   array(
   ),
   false
);

дополнительных параметров передавать не требуется, будет вызвана карта с заполненными настройками модуля и метками из вашего инфоблока

после этого настройка закончена.



